import json
import re

# Tu dump MySQL completo
mysql_dump = """INSERT INTO `materiales` VALUES (0,'Material de Prueba','UND',NULL),(120123,'RHODAPON LZS94/RP','KG','MTP'),(120142,'RHODOPOL-23 25KG BAG','KG','MTP'),(120155,'CALCIUM LIGNO SULPHONATE','KG','MTP'),(120178,'HYDRO TREATED LIGHT PARAFIN(MINERAL OIL)','KG','MTP'),(120197,'SAG 1572','KG','MTP'),(120199','STAB-41','KG','MTP'),(150182,'AZOXYSTROBIN 98% TECH','KG','MTP'),(190147','OPARYL MT 705','KG','MTP'),(191143','UFOXANE 3A','KG','MTP'),(564101','TEBUCONAZOLE TECHNICAL','KG','MTP'),(716151','OPARYL DT 320','KG','MTP'),(1010072','OLEIC ACID','KG','MTP'),(1020068','SAG 1572','KG','MTP'),(1030620','HEXAMETILENTETRAMINA','KG','MTP'),(1180001','MANGANESE SULFATE 19% SOLU KG BULK','KG','MTP'),(1180003','ZINC SULFATE MONOHYDRATE','KG','MTP'),(1180004','HEXAMINE 25KG BAG (30065)','KG','MTP'),(1180005','MORWET IP 18.1KG/40LB BAG (30095)','KG','MTP'),(1180006','BORRESPERSE NA 25KG BAG C0 (30601)','KG','MTP'),(1180007','SUGAR 25KG BAG US','KG','MTP'),(1180008','ARBO S01 25 KG BAG','KG','MTP'),(1180021','BORROSPERSE NA 880 P','KG','MTP'),(1180174','SUPRAGYL GN-3 x KG','KG','MTP'),(1180175','POLIALQUIL NAFTALENO SULFONATO x KG','KG','MTP'),(1180188','GLUTARALDEHIDO x KG','KG','MTP'),(1180198','PROPILENGLICOL x KG','KG','MTP'),(1180199','PROXEL 102 X KG','KG','MTP'),(1180201','GOMA XANTANA x KG','KG','MTP'),(1180203','ANTIESPUMANTE x KG','KG','MTP'),(1180259','SODIUM LIGNO SULPHONATE (DOMSJO)','KG','MTP'),(1200292','ANTIFOAM SAG 1572','KG','MTP'),(1300328','PROTHIOCONAZOLE TECH.','KG','MTP'),(1300458','KURARAY POVAL 5-88 S2','KG','MTP'),(1300491','REFINED SOYABEAN OIL','KG','MTP'),(1681050','CIMOXANIL 98 TC','KG','MTP'),(1900456','RHODACAL DS 10 63.5KG/ 140 LB DRUM','KG','MTE'),(1900523','  BORROSPERSE NA220','KG','MTP'),(1901184','Tergitol NP-10','KG','MTP'),(1901185','Triton X-45','KG','MTP'),(1901186','Span 85','KG','MTP'),(1901211','CARBOXIMETIL CELLULOSE','KG','MTP'),(1901408','REAX 88A (BQ)','KG','MTP'),(2180004','PLCARDS MARINE POLUTAN CONTENEDOR','ST','MTE'),(2180011','LABEL DIAMANTE CLASE 9  CONTN','ST','MTE'),(2180017','MANZATE 75WG IDENTIF.PALLET LABEL C.AM','ST','MTE'),(2180018','LBL CAUTION PRINTED BLACK/YELOW','ST','MTE'),(2180025','BOX S PRNTD 24X1KG MANZATE PRO STICK MX','ST','MTE'),(2180029','BAG POL 25KG NO PRINTING FUNG','ST','MTE'),(2180039','BOX 24X1KG. MANZATE 200D PE TQC','ST','MTE'),(2180041','LBL 50LB MANZATE 200 TAIWAN','ST','MTE'),(2180044','LBL 575KG MANZATE 75WG CENTRO AMERICA','ST','MTE'),(2180053','LBL BAG MANZATE 200 X 25KG (UPL)CHILE','ST','MTE'),(2180054','ZBAG 500KG MANZATE SUPERSACK 200WG CO','ST','MTE'),(2180056','ZBAG 575KG MANZATE SUPERSACK 75WG CA/PH','ST','MTE'),(2180058','BAG METAL.1KG MANZATE 200D PERU TQC','ST','MTE'),(2180062','SEAL TUG TIE BACKLOCK RED LOGO UCPL','ST','MTE'),(2180065','PALLET LABEL MANZATE 200 PH 750 KG','ST','MTE'),(2180066','PALLET MADERA EUROPALET REFORZADO TIPO B','ST','MTE'),(2180068','PALLET MADERA 53X42 TIPO B EXPT BOLSAS','ST','MTE'),(2180076','PROTECTOR DE CARTON EUROPALET','ST','MTE'),(2180077','PROTECTOR DE PALLET SIN IMPRES-SACO','ST','MTE'),(2180086','LBL MANZATE 25 KG WP PERU FRONT','ST','MTE'),(2180094','LABEL BAG MANZATE WG 25 KG CHILE','ST','MTE'),(2180095','BAG MANZATE 200 WP 1 KG COLOMBIA','ST','MTE'),(2180098','ETIQ BOLSA MANCOZEB 82% 25KG ID','ST','MTE'),(2180099','ETIQ SUPERSACO MANZATE DF 575KG PH','ST','MTE'),(2180100','ETIQ BOLSA MANZATE DF 25KG PH','ST','MTE'),(2180103','ETIQ BOLSA MANZATE 200WP 25KG CN','ST','MTE'),(2180107','ETIQ PALET MANZATE DF 750KG CHINA','ST','MTE'),(2180108','BAG MANZATE 200 WP 1 KG FARMAGRO PE','ST','MTE');"""

# Extraer los valores usando regex
# Buscamos patrones como: ('123', 'Desc', 'UND', 'MTP')
pattern = r"\('([^']*)','([^']*)','([^']*)',(?:'([^']*)'|NULL)\)"
matches = re.findall(pattern, mysql_dump)

materials = []
for match in matches:
    materials.append({
        "id_code": match[0],
        "description": match[1],
        "unit": match[2],
        "type": match[3] if match[3] else None
    })

# Guardar como JSON
with open('c:/Generador de QR - copia/materials.json', 'w', encoding='utf-8') as f:
    json.dump(materials, f, indent=2, ensure_ascii=False)

print(f"âœ“ JSON generado con {len(materials)} materiales")
